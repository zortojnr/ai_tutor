<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teach Me Maths</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css">
  <style>
    body { 
      background-color: #f8f9fa; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .chat-box { 
      min-height: 10px; 
      overflow-y: visible; 
      margin-bottom: 1rem; 
      max-height: 60vh;
      overflow-y: auto;
    }
    .bubble-user { 
      background-color: #d1e7dd; 
      padding: 12px 16px; 
      border-radius: 15px; 
      margin: 8px 0; 
      word-wrap: break-word;
      max-width: 85%;
      margin-left: auto;
    }
    .bubble-ai { 
      background-color: #e2e3e5; 
      padding: 12px 16px; 
      border-radius: 15px; 
      margin: 8px 0; 
      word-wrap: break-word;
      max-width: 90%;
    }
    .math-rendered { 
      font-size: 1.1rem; 
      color: #212529; 
      line-height: 1.6;
    }
    
    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      .card {
        margin: 10px 0;
      }
      .bubble-user, .bubble-ai {
        padding: 10px 12px;
        font-size: 0.9rem;
      }
      .math-rendered {
        font-size: 1rem;
      }
      .input-group {
        margin-top: 15px;
      }
      .btn {
        padding: 8px 16px;
        font-size: 0.9rem;
      }
      .form-control {
        font-size: 0.9rem;
        padding: 8px 12px;
      }
      .welcome-section {
        margin: 50px 0 !important;
        padding: 20px 10px;
      }
      .welcome-section h2 {
        font-size: 1.5rem;
        margin-bottom: 10px;
      }
      .welcome-section p {
        font-size: 1rem;
      }
      #title-section {
        font-size: 1.5rem !important;
        margin-bottom: 20px;
      }
    }
    
    @media (max-width: 576px) {
      .container {
        padding: 5px;
      }
      .bubble-user, .bubble-ai {
        padding: 8px 10px;
        font-size: 0.85rem;
        max-width: 95%;
      }
      .math-rendered {
        font-size: 0.9rem;
      }
      .welcome-section h2 {
        font-size: 1.3rem;
      }
      .welcome-section p {
        font-size: 0.9rem;
      }
      .card-text {
        font-size: 0.8rem;
        padding: 8px;
      }
      #title-section {
        font-size: 1.2rem !important;
        margin-bottom: 15px;
      }
      .input-group-lg .form-control {
        font-size: 0.9rem;
        padding: 10px 12px;
      }
      .input-group-lg .btn {
        font-size: 0.9rem;
        padding: 10px 12px;
      }
    }
    
    /* Tablet responsiveness */
    @media (min-width: 769px) and (max-width: 1024px) {
      .bubble-user, .bubble-ai {
        max-width: 80%;
      }
      .welcome-section {
        margin: 100px 0 !important;
      }
    }
  </style>
</head>
<body>
    
<div class="container py-5">
  <div class="text-center mb-4" style="font-size: 2rem;" id="title-section">
                    üß†
                    <span class="katex-math">\( \boxed{\textsf{Teach~Me}} \)</span>
                    <span class="katex-math" style="color: purple;">\( \mathbb{M}\! \mathbb{A}\! \mathbb{T}\! \mathbb{H}\! \mathbb{S} \)</span>
                    </div>
  

        <div class="card">
            <div class="card-body">
                {% if response is not defined %}
                <div class="welcome-section" style="margin: 150px 20px; text-align: center;">
                   <h2 style="color: #6c757d; white-space: nowrap;">Welcome to Teach Me Maths!</h2>
                   <p style="color: #6c757d; white-space: nowrap;">Ask any math question and get step-by-step solutions</p>
                </div>

                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 g-md-4">
                <div class="col">
                <div class="card text-white bg-primary h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúSolve \( \int x^2 dx \) step-by-step‚Äù</p>
                    </div>
                </div>
                </div>
                <div class="col">
                <div class="card text-white bg-success h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúWhat is the derivative of \( \sin(x^2) \)?‚Äù</p>
                    </div>
                </div>
                </div>
                <div class="col">
                <div class="card text-white bg-warning h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúExplain the concept of eigenvectors‚Äù</p>
                    </div>
                </div>
                </div>
                <div class="col">
                <div class="card text-white bg-info h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúHow can I master calculus in 30 days?‚Äù</p>
                    </div>
                </div>
                </div>
                <div class="col">
                <div class="card text-white bg-danger h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúWhat math should I know before learning machine learning?‚Äù</p>
                    </div>
                </div>
                </div>
                <div class="col">
                <div class="card text-white bg-dark h-100">
                    <div class="card-body">
                    <p class="card-text">‚ÄúHow does machine learning differ from traditional programming?‚Äù</p>
                    </div>
                </div>
                </div>
            </div>
            {% endif %}
        <div class="chat-box" id="chatBox">
            {% for message in response %}
            <div class="{{ 'bubble-user text-end' if message.type == 'user' else 'bubble-ai' }}">
                {% if message.type == 'user' %}
                <strong>You:</strong> {{ message.message }}
                {% else %}
                <strong>AI:</strong> <br> <span class="math-rendered">{{ message.message | safe }}</span>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <form method="post" action="/" >
            <div class="input-group input-group-lg">
                <input type="text" name="question" class="form-control" placeholder="Ask a maths question..." required style="border-radius: 25px 0 0 25px;">
                <button type="submit" class="btn btn-dark" style="border-radius: 0 25px 25px 0; min-width: 80px;">Ask</button>
            </div>
        </form>
    </div>
  </div>
</div>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body, {
      delimiters: [
        {left: '\\(', right: '\\)', display: false},
        {left: '\\[', right: '\\]', display: true}
      ]
    });">
  </script>
</body>
</html>